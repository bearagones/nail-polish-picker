{"ast":null,"code":"import { createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged, updateProfile } from \"firebase/auth\";\nimport { doc, setDoc, getDoc } from \"firebase/firestore\";\nimport { auth, db } from \"./config\";\n\n// Sign up with email and password\nexport const signUpWithEmail = async (email, password, displayName) => {\n  try {\n    const userCredential = await createUserWithEmailAndPassword(auth, email, password);\n    const user = userCredential.user;\n\n    // Update the user's display name\n    await updateProfile(user, {\n      displayName: displayName\n    });\n\n    // Create user document in Firestore\n    await setDoc(doc(db, \"users\", user.uid), {\n      uid: user.uid,\n      email: user.email,\n      displayName: displayName,\n      createdAt: new Date().toISOString(),\n      polishCollection: [],\n      topperCollection: [],\n      recentCombinations: []\n    });\n    return {\n      uid: user.uid,\n      email: user.email,\n      displayName: displayName\n    };\n  } catch (error) {\n    throw new Error(error.message);\n  }\n};\n\n// Sign in with email and password\nexport const signInWithEmail = async (email, password) => {\n  try {\n    const userCredential = await signInWithEmailAndPassword(auth, email, password);\n    const user = userCredential.user;\n    return {\n      uid: user.uid,\n      email: user.email,\n      displayName: user.displayName\n    };\n  } catch (error) {\n    throw new Error(error.message);\n  }\n};\n\n// Sign out\nexport const signOutUser = async () => {\n  try {\n    await signOut(auth);\n  } catch (error) {\n    throw new Error(error.message);\n  }\n};\n\n// Get current user data from Firestore\nexport const getUserData = async uid => {\n  try {\n    const userDoc = await getDoc(doc(db, \"users\", uid));\n    if (userDoc.exists()) {\n      return userDoc.data();\n    } else {\n      throw new Error(\"User data not found\");\n    }\n  } catch (error) {\n    throw new Error(error.message);\n  }\n};\n\n// Listen to auth state changes\nexport const onAuthStateChange = callback => {\n  return onAuthStateChanged(auth, callback);\n};","map":{"version":3,"names":["createUserWithEmailAndPassword","signInWithEmailAndPassword","signOut","onAuthStateChanged","updateProfile","doc","setDoc","getDoc","auth","db","signUpWithEmail","email","password","displayName","userCredential","user","uid","createdAt","Date","toISOString","polishCollection","topperCollection","recentCombinations","error","Error","message","signInWithEmail","signOutUser","getUserData","userDoc","exists","data","onAuthStateChange","callback"],"sources":["C:/Users/Beatrice/Documents/GitHub/nail-polish-picker/src/firebase/auth.js"],"sourcesContent":["import { \r\n  createUserWithEmailAndPassword, \r\n  signInWithEmailAndPassword, \r\n  signOut, \r\n  onAuthStateChanged,\r\n  updateProfile\r\n} from \"firebase/auth\";\r\nimport { doc, setDoc, getDoc } from \"firebase/firestore\";\r\nimport { auth, db } from \"./config\";\r\n\r\n// Sign up with email and password\r\nexport const signUpWithEmail = async (email, password, displayName) => {\r\n  try {\r\n    const userCredential = await createUserWithEmailAndPassword(auth, email, password);\r\n    const user = userCredential.user;\r\n    \r\n    // Update the user's display name\r\n    await updateProfile(user, {\r\n      displayName: displayName\r\n    });\r\n    \r\n    // Create user document in Firestore\r\n    await setDoc(doc(db, \"users\", user.uid), {\r\n      uid: user.uid,\r\n      email: user.email,\r\n      displayName: displayName,\r\n      createdAt: new Date().toISOString(),\r\n      polishCollection: [],\r\n      topperCollection: [],\r\n      recentCombinations: []\r\n    });\r\n    \r\n    return {\r\n      uid: user.uid,\r\n      email: user.email,\r\n      displayName: displayName\r\n    };\r\n  } catch (error) {\r\n    throw new Error(error.message);\r\n  }\r\n};\r\n\r\n// Sign in with email and password\r\nexport const signInWithEmail = async (email, password) => {\r\n  try {\r\n    const userCredential = await signInWithEmailAndPassword(auth, email, password);\r\n    const user = userCredential.user;\r\n    \r\n    return {\r\n      uid: user.uid,\r\n      email: user.email,\r\n      displayName: user.displayName\r\n    };\r\n  } catch (error) {\r\n    throw new Error(error.message);\r\n  }\r\n};\r\n\r\n// Sign out\r\nexport const signOutUser = async () => {\r\n  try {\r\n    await signOut(auth);\r\n  } catch (error) {\r\n    throw new Error(error.message);\r\n  }\r\n};\r\n\r\n// Get current user data from Firestore\r\nexport const getUserData = async (uid) => {\r\n  try {\r\n    const userDoc = await getDoc(doc(db, \"users\", uid));\r\n    if (userDoc.exists()) {\r\n      return userDoc.data();\r\n    } else {\r\n      throw new Error(\"User data not found\");\r\n    }\r\n  } catch (error) {\r\n    throw new Error(error.message);\r\n  }\r\n};\r\n\r\n// Listen to auth state changes\r\nexport const onAuthStateChange = (callback) => {\r\n  return onAuthStateChanged(auth, callback);\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}